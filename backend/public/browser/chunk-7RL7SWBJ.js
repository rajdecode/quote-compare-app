import{a as N}from"./chunk-Q3PHA6KI.js";import{t as v,u as S,z as x}from"./chunk-GES2Q76X.js";import{a as E,b as k,c as O,d as W,e as T,f as D,l as q,m as B,n as I}from"./chunk-5VK624XH.js";import"./chunk-URMLSJLD.js";import{B as a,Da as y,F as M,N as p,O as w,T as C,U as t,V as r,aa as h,ca as f,ga as s,ha as P,ia as _,ka as g,la as m,ma as u,n as b,u as c}from"./chunk-7LMPOD5W.js";function L(d,i){if(d&1&&(t(0,"div",11),s(1),r()),d&2){let n=f();a(),P(n.errorMessage())}}function U(d,i){if(d&1&&(t(0,"div",12),s(1),r()),d&2){let n=f();a(),P(n.successMessage())}}var F=class d{authService=b(N);currentPassword="";newPassword="";confirmPassword="";loading=c(!1);errorMessage=c("");successMessage=c("");async onSubmit(){if(this.loading.set(!0),this.errorMessage.set(""),this.successMessage.set(""),this.newPassword!==this.confirmPassword){this.errorMessage.set("New passwords do not match."),this.loading.set(!1);return}let i=this.authService.currentUser();if(!i||!i.email){this.errorMessage.set("No user logged in."),this.loading.set(!1);return}try{let n=v.credential(i.email,this.currentPassword);await S(i,n),await x(i,this.newPassword),this.successMessage.set("Password updated successfully!"),this.currentPassword="",this.newPassword="",this.confirmPassword=""}catch(n){console.error("Update password error:",n),n.code==="auth/wrong-password"?this.errorMessage.set("Incorrect current password."):this.errorMessage.set("Failed to update password. Please try again.")}finally{this.loading.set(!1)}}goBack(){window.history.back()}static \u0275fac=function(n){return new(n||d)};static \u0275cmp=M({type:d,selectors:[["app-change-password"]],decls:26,vars:7,consts:[[1,"container","page-content"],[1,"auth-card","glass-panel",2,"max-width","500px","margin","0 auto"],[1,"subtitle"],[3,"ngSubmit"],[1,"form-group"],["for","currentPassword"],["type","password","id","currentPassword","name","currentPassword","required","",3,"ngModelChange","ngModel"],["for","newPassword"],["type","password","id","newPassword","name","newPassword","required","","minlength","6",3,"ngModelChange","ngModel"],["for","confirmPassword"],["type","password","id","confirmPassword","name","confirmPassword","required","","minlength","6",3,"ngModelChange","ngModel"],[1,"alert","error"],[1,"alert","success"],[1,"form-actions"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"]],template:function(n,e){n&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Change Password"),r(),t(4,"p",2),s(5,"Secure your account with a new password."),r(),t(6,"form",3),h("ngSubmit",function(){return e.onSubmit()}),t(7,"div",4)(8,"label",5),s(9,"Current Password (Required)"),r(),t(10,"input",6),u("ngModelChange",function(o){return m(e.currentPassword,o)||(e.currentPassword=o),o}),r()(),t(11,"div",4)(12,"label",7),s(13,"New Password"),r(),t(14,"input",8),u("ngModelChange",function(o){return m(e.newPassword,o)||(e.newPassword=o),o}),r()(),t(15,"div",4)(16,"label",9),s(17,"Confirm New Password"),r(),t(18,"input",10),u("ngModelChange",function(o){return m(e.confirmPassword,o)||(e.confirmPassword=o),o}),r()(),p(19,L,2,1,"div",11),p(20,U,2,1,"div",12),t(21,"div",13)(22,"button",14),s(23),r(),t(24,"button",15),h("click",function(){return e.goBack()}),s(25,"Cancel"),r()()()()()),n&2&&(a(10),g("ngModel",e.currentPassword),a(4),g("ngModel",e.newPassword),a(4),g("ngModel",e.confirmPassword),a(),w(e.errorMessage()?19:-1),a(),w(e.successMessage()?20:-1),a(2),C("disabled",e.loading()),a(),_(" ",e.loading()?"Updating...":"Update Password"," "))},dependencies:[y,I,D,E,k,O,q,B,T,W],styles:[".page-content[_ngcontent-%COMP%]{padding-top:8rem}.auth-card[_ngcontent-%COMP%]{padding:2rem;border-radius:16px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;color:var(--text-heading)}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-dim);margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-body);font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem;transition:border-color .2s}input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.1)}.btn-block[_ngcontent-%COMP%]{width:100%;margin-top:1rem}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;margin-bottom:1.5rem;font-size:.9rem}.alert.error[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b;border:1px solid #fecaca}.alert.success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}"]})};export{F as ChangePassword};
