import{a as w}from"./chunk-C64XARKB.js";import{A as a,Ca as D,E as _,Fa as O,Ia as k,M as g,N as f,O as h,P as C,Q as E,S as t,T as e,_ as x,ba as q,ca as i,da as s,ea as p,ia as y,ma as c,n as u,na as S,oa as b,u as v,ua as I,wa as M,ya as P}from"./chunk-DXR3KEKN.js";function F(n,l){n&1&&(t(0,"div",4)(1,"p"),i(2,"Loading details..."),e()())}function B(n,l){n&1&&(t(0,"div",4)(1,"p"),i(2,"Quote not found."),e()())}function A(n,l){if(n&1&&(t(0,"tr",20)(1,"td",21),i(2),e(),t(3,"td",22),i(4),e(),t(5,"td",23),i(6),c(7,"date"),e(),t(8,"td",24),i(9),e()()),n&2){let o=l.$implicit;a(2),s(o.vendorName),a(2),s(o.message),a(2),s(b(7,4,o.createdAt,"short")),a(3),p(" $",o.price)}}function N(n,l){if(n&1&&(t(0,"div",14)(1,"table",16)(2,"thead")(3,"tr",17)(4,"th",18),i(5,"Vendor"),e(),t(6,"th",18),i(7,"Message"),e(),t(8,"th",19),i(9,"Date"),e(),t(10,"th",19),i(11,"Price"),e()()(),t(12,"tbody"),C(13,A,10,7,"tr",20,h),e()()()),n&2){let o=x(2);a(13),E(o.quote().responses)}}function $(n,l){n&1&&(t(0,"p",15),i(1,"No offers received yet."),e())}function j(n,l){if(n&1&&(t(0,"div",5)(1,"div",6)(2,"h1"),i(3),c(4,"titlecase"),e(),t(5,"span"),i(6),e()(),t(7,"div",7)(8,"div",8)(9,"label",9),i(10,"Postal Code"),e(),t(11,"span",10),i(12),e()(),t(13,"div",8)(14,"label",9),i(15,"Date Posted"),e(),t(16,"span",10),i(17),c(18,"date"),e()(),t(19,"div",11)(20,"label",9),i(21,"Details"),e(),t(22,"p",12),i(23),e()()(),t(24,"h2",13),i(25),e(),g(26,N,15,0,"div",14)(27,$,2,0,"p",15),e()),n&2){let o,d,r=x();a(3),p("",S(4,10,r.quote().serviceType)," Quote"),a(2),q(y("status-badge status-",r.quote().status.toLowerCase())),a(),s(r.quote().status),a(6),s(r.quote().postalCode),a(5),s(b(18,12,r.quote().createdAt,"medium")),a(6),s(r.quote().details),a(2),p("Vendor Offers (",((o=r.quote().responses)==null?null:o.length)||0,")"),a(),f((d=r.quote().responses)!=null&&d.length?26:27)}}var Q=class n{quote=null;quoteId=null;loading=v(!0);route=u(D);authService=u(w);async ngOnInit(){let l=this.route.snapshot.paramMap.get("quoteId");if(this.quoteId=this.route.snapshot.paramMap.get("quoteId"),!this.quoteId)return;let o=this.authService.currentUser();if(o)try{let d=await o.getIdToken(),r=await fetch(`${k.apiUrl}/quotes/${this.quoteId}`,{headers:{Authorization:`Bearer ${d}`}});if(r.ok){let m=await r.json();m&&(m.responses&&m.responses.sort((T,z)=>T.price-z.price),this.quote.set(m))}}catch(d){console.error("Error fetching quote:",d)}finally{this.loading.set(!1)}}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=_({type:n,selectors:[["app-quote-details"]],decls:9,vars:1,consts:[[1,"container",2,"padding-top","2rem"],[1,"back-link",2,"margin-bottom","1rem"],["routerLink","/buyer",1,"btn","btn-sm","btn-secondary"],[1,"material-icons",2,"font-size","1rem","vertical-align","middle"],[1,"glass-panel",2,"text-align","center","padding","40px"],[1,"quote-detail-layout","glass-panel",2,"padding","2rem"],[1,"detail-header"],[1,"detail-grid",2,"display","grid","grid-template-columns","1fr 1fr","gap","2rem","margin","2rem 0"],[1,"info-group"],[2,"color","var(--text-dim)","display","block","margin-bottom","0.5rem"],[2,"font-size","1.1rem"],[1,"info-group",2,"grid-column","1 / -1"],[2,"font-size","1.1rem","line-height","1.6"],[2,"margin-top","3rem","margin-bottom","1.5rem"],[1,"table-responsive"],[2,"color","var(--text-dim)","font-style","italic"],[1,"comparison-table",2,"width","100%","border-collapse","collapse"],[2,"border-bottom","1px solid rgba(255,255,255,0.1)"],[2,"padding","1rem","text-align","left"],[2,"padding","1rem","text-align","right"],[2,"border-bottom","1px solid rgba(255,255,255,0.05)"],[2,"padding","1rem","color","var(--primary-color)","font-weight","500"],[2,"padding","1rem","color","var(--text-dim)"],[2,"padding","1rem","text-align","right","color","var(--text-dim)"],[2,"padding","1rem","text-align","right","font-weight","bold","color","#2ecc71","font-size","1.1rem"]],template:function(o,d){o&1&&(t(0,"div",0)(1,"div",1)(2,"a",2)(3,"span",3),i(4,"arrow_back"),e(),i(5," Back to Dashboard "),e()(),g(6,F,3,0,"div",4)(7,B,3,0,"div",4)(8,j,28,15,"div",5),e()),o&2&&(a(6),f(d.loading()?6:d.quote()?8:7))},dependencies:[P,O,I,M],styles:[".status-badge[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:9999px;font-size:.85rem;font-weight:600}.status-badge.status-open[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.status-badge.status-responded[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #E2E8F0;padding-bottom:1.5rem;margin-bottom:2rem}.detail-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--text-main);font-size:1.8rem}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--text-dim);text-transform:uppercase;font-size:.8rem;letter-spacing:.5px;border-bottom:2px solid #E2E8F0}.comparison-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--text-main);border-bottom:1px solid #F1F5F9}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:1.5rem}.comparison-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:var(--text-dim);text-transform:uppercase;font-size:.85rem;letter-spacing:.5px}"]})};export{Q as QuoteDetails};
