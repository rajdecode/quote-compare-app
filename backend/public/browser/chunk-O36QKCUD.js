import{a as N}from"./chunk-Q3PHA6KI.js";import{t as v,u as x,z as S}from"./chunk-GES2Q76X.js";import{a as k,b as O,c as E,d as D,e as T,f as W,l as I,m as q,n as B}from"./chunk-5VK624XH.js";import"./chunk-URMLSJLD.js";import{B as o,Da as y,F as M,N as g,O as u,T as C,U as n,V as r,aa as m,ca as p,ga as i,ha as w,ia as _,ka as b,la as h,ma as f,n as P,u as l}from"./chunk-7LMPOD5W.js";function U(s,a){if(s&1&&(n(0,"div",9),i(1),r()),s&2){let e=p();o(),w(e.errorMessage())}}function V(s,a){if(s&1&&(n(0,"div",10),i(1),r()),s&2){let e=p();o(),w(e.successMessage())}}var F=class s{authService=P(N);currentPassword="";newPassword="";loading=l(!1);errorMessage=l("");successMessage=l("");async onSubmit(){this.loading.set(!0),this.errorMessage.set(""),this.successMessage.set("");let a=this.authService.currentUser();if(!a||!a.email){this.errorMessage.set("No user logged in."),this.loading.set(!1);return}try{let e=v.credential(a.email,this.currentPassword);await x(a,e),await S(a,this.newPassword),this.successMessage.set("Password updated successfully!"),this.currentPassword="",this.newPassword=""}catch(e){console.error("Update password error:",e),e.code==="auth/wrong-password"?this.errorMessage.set("Incorrect current password."):this.errorMessage.set("Failed to update password. Please try again.")}finally{this.loading.set(!1)}}goBack(){window.history.back()}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=M({type:s,selectors:[["app-change-password"]],decls:22,vars:6,consts:[[1,"container","page-content"],[1,"auth-card","glass-panel",2,"max-width","500px","margin","0 auto"],[1,"subtitle"],[3,"ngSubmit"],[1,"form-group"],["for","currentPassword"],["type","password","id","currentPassword","name","currentPassword","required","",3,"ngModelChange","ngModel"],["for","newPassword"],["type","password","id","newPassword","name","newPassword","required","","minlength","6",3,"ngModelChange","ngModel"],[1,"alert","error"],[1,"alert","success"],[1,"form-actions"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],["type","button",1,"btn","btn-secondary","btn-block",3,"click"]],template:function(e,t){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),i(3,"Change Password"),r(),n(4,"p",2),i(5,"Secure your account with a new password."),r(),n(6,"form",3),m("ngSubmit",function(){return t.onSubmit()}),n(7,"div",4)(8,"label",5),i(9,"Current Password (Required for security)"),r(),n(10,"input",6),f("ngModelChange",function(d){return h(t.currentPassword,d)||(t.currentPassword=d),d}),r()(),n(11,"div",4)(12,"label",7),i(13,"New Password"),r(),n(14,"input",8),f("ngModelChange",function(d){return h(t.newPassword,d)||(t.newPassword=d),d}),r()(),g(15,U,2,1,"div",9),g(16,V,2,1,"div",10),n(17,"div",11)(18,"button",12),i(19),r(),n(20,"button",13),m("click",function(){return t.goBack()}),i(21,"Cancel"),r()()()()()),e&2&&(o(10),b("ngModel",t.currentPassword),o(4),b("ngModel",t.newPassword),o(),u(t.errorMessage()?15:-1),o(),u(t.successMessage()?16:-1),o(2),C("disabled",t.loading()),o(),_(" ",t.loading()?"Updating...":"Update Password"," "))},dependencies:[y,B,W,k,O,E,I,q,T,D],styles:[".page-content[_ngcontent-%COMP%]{padding-top:8rem}.auth-card[_ngcontent-%COMP%]{padding:2rem;border-radius:16px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;color:var(--text-heading)}.subtitle[_ngcontent-%COMP%]{text-align:center;color:var(--text-dim);margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-body);font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #e2e8f0;border-radius:8px;font-size:1rem;transition:border-color .2s}input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.1)}.btn-block[_ngcontent-%COMP%]{width:100%;margin-top:1rem}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:8px;margin-bottom:1.5rem;font-size:.9rem}.alert.error[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b;border:1px solid #fecaca}.alert.success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}"]})};export{F as ChangePassword};
